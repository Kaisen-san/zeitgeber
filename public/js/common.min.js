
const zeitgeber={};

(()=>{zeitgeber.applyFadeIn=(elementsToApply,fadeInClass)=>{elementsToApply.forEach(e=>e.classList.add(fadeInClass));window.addEventListener('scroll',evt=>{elementsToApply.forEach(e=>{const positionFromTop=e.getBoundingClientRect().top;if(positionFromTop<800){e.classList.remove(fadeInClass);}});});};})();

(()=>{zeitgeber.setImagesWhenLoaded=(products)=>{const imgPromises=products.map(p=>fetch(p.getAttribute('imgUrl')));Promise.all(imgPromises).then(imgs=>{products.forEach((p,i)=>{p.style.backgroundImage=`url(${imgs[i].url})`;})});};})();

(()=>{zeitgeber.formatElementsPayload=($atTarget,byTypeOf,withField)=>{const $elements=$atTarget.querySelectorAll(byTypeOf);return Array.from($elements).reduce((acc,$cur)=>{return{...acc,[$cur.name]:$cur[withField]};},{});}})();

(()=>{zeitgeber.sendHttpRequest=(method,url,data)=>{return fetch(url,{method:method,body:(data instanceof FormData)?data:JSON.stringify(data),headers:(data instanceof FormData)?{}:{'Content-Type':'application/json'}}).then(response=>{if(response.status>=400){return response.json().then(errResData=>{const error=new Error('Something went wrong requesting your data');error.data=errResData;throw error;});}
return response.json();});}})();

(()=>{zeitgeber.isBelowTriggerZone=false;zeitgeber.switchThemes=(trigger,header,headerLogo,lightLogo,darkLogo,themeClass)=>{window.addEventListener('scroll',evt=>{const positionFromTop=trigger.getBoundingClientRect().top;if(zeitgeber.isBelowTriggerZone){if(positionFromTop>=65){header.classList.remove(themeClass);headerLogo.attributes.src.value=lightLogo;zeitgeber.isBelowTriggerZone=false;}}else{if(positionFromTop<65){header.classList.add(themeClass);headerLogo.attributes.src.value=darkLogo;zeitgeber.isBelowTriggerZone=true;}}});}})();