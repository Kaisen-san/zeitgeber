
(()=>{document.getElementById('form').addEventListener('submit',(e)=>{e.preventDefault();runCaptcha();})
const runCaptcha=()=>{grecaptcha.execute('6LfQhsEUAAAAAHDEZLdAba-Vv-x0VAQxBRGIlk16',{action:'homepage'}).then(function(token){const user=document.querySelector('#user');const email=document.querySelector('#email');const message=document.querySelector('#message');const captcha=token;sendData(user,email,message,captcha);});}
const sendData=((user,email,message,captcha)=>{const info=JSON.stringify({user:user,email:email,message:message,captcha:captcha});fetch('/verify',{method:'POST',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:info}).then((res)=>res.json()).then((data)=>{console.log('msg:'+data.msg+', score: '+data.score)});});})();

(()=>{const autoClose=(triggers,switcher)=>{triggers.forEach(t=>{t.addEventListener('click',evt=>{switcher.checked=false;});});}
const navItems=Array.from(document.querySelectorAll('.menu__item'));const switcher=document.querySelector('.menu__switcher');autoClose(navItems,switcher);})();

(()=>{document.getElementById('purchase-form').addEventListener('submit',(e)=>{e.preventDefault();runCaptcha();})
const runCaptcha=()=>{grecaptcha.execute('6LfQhsEUAAAAAHDEZLdAba-Vv-x0VAQxBRGIlk16',{action:'homepage'}).then(function(token){const firstName=document.querySelector('#first-name');const lastName=document.querySelector('#last-name');const email=document.querySelector('#purchase-email');const address=document.querySelector('#address');const message=document.querySelector('#purchase-message');const captcha=token;sendData(firstName,lastName,email,address,message,captcha);});}
const sendData=((firstName,lastName,email,address,message,captcha)=>{const info=JSON.stringify({firstName:firstName,lastName:lastName,email:email,address:address,message:message,captcha:captcha});fetch('/verify',{method:'POST',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:info}).then((res)=>res.json()).then((data)=>{console.log('msg:'+data.msg+', score: '+data.score)});});})();

(()=>{const slideshowAnimation=(imgs,btns,idx)=>{imgs.forEach(e=>e.classList.remove(classNames.imgMiddle,classNames.imgLeft,classNames.imgRight,classNames.imgHide));idx=(idx===imgs.length)?0:idx;let leftIdx=(idx-1===-1)?imgs.length-1:idx-1;let rightIdx=(idx+1===imgs.length)?0:idx+1;imgs[idx].classList.add(classNames.imgMiddle);imgs[leftIdx].classList.add(classNames.imgLeft);imgs[rightIdx].classList.add(classNames.imgRight);imgs.forEach((img,i)=>{if(i!==idx&&i!==leftIdx&&i!==rightIdx){img.classList.add(classNames.imgHide);}});btns.forEach(btn=>btn.classList.remove(classNames.btnActive));btns[idx].classList.add(classNames.btnActive);};const classNames={img:'slideshow__img',imgMiddle:'slideshow__img--middle',imgLeft:'slideshow__img--left',imgRight:'slideshow__img--right',imgHide:'slideshow__img--hide',btn:'slideshow__btn',btnActive:'slideshow__btn--active'}
const imagesList=Array.from(document.querySelectorAll('.'+classNames.img));const buttonsList=Array.from(document.querySelectorAll('.'+classNames.btn));imagesList.forEach((img,idx)=>{img.addEventListener('click',evt=>{const targetClasses=Array.from(evt.target.classList);const i=targetClasses.includes(classNames.imgMiddle)?idx+1:idx;slideshowAnimation(imagesList,buttonsList,i);});});buttonsList.forEach((btn,idx)=>{btn.addEventListener('click',evt=>{slideshowAnimation(imagesList,buttonsList,idx);});});})();